<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grow and Glow</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .container {
            text-align: center;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
            width: 90%;
            max-width: 600px;
        }
        h1 {
            color: #333;
        }
        .btn {
            display: inline-block;
            margin: 10px;
            padding: 10px 20px;
            font-size: 16px;
            background-color: #007BFF;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        .btn:hover {
            background-color: #0056b3;
        }
        label {
            font-weight: bold;
            margin-top: 10px;
        }
        input[type="text"],
        input[type="email"],
        input[type="password"],
        input[type="tel"],
        input[type="number"],
        textarea {
            width: 100%;
            padding: 10px;
            margin: 8px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-sizing: border-box;
        }
        .profile-img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 20px;
        }
        .profile-section {
            display: none;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Page d'Accueil -->
    <div class="container" id="home-page">
        <h1>Bienvenue sur Grow & Glow</h1>
        <div>
            <img src="logoo.jpg" alt="Logo du Groupe" width="100" height="auto">
        </div>
        <a href="#" class="btn" onclick="showSignUp()">Sign Up</a>
        <a href="#" class="btn" onclick="showLogin()">Login</a>
    </div>

    <!-- Page d'Inscription -->
    <div class="container hidden" id="signup-page">
        <h1>Inscription</h1>
        <form id="signup-form">
            <label for="id">ID Utilisateur:</label>
            <input type="number" id="id" required min="1" title="L'ID doit être un entier positif"><br>
            
            <label for="first-name">Prénom:</label>
            <input type="text" id="first-name" required><br>
            
            <label for="last-name">Nom:</label>
            <input type="text" id="last-name" required><br>
            
            <label for="email">Email:</label>
            <input type="email" id="email" required><br>
            
            <label for="password">Mot de passe:</label>
            <input type="password" id="password" required><br>
            
            <label for="address">Adresse:</label>
            <textarea id="address" required></textarea><br>
            
            <label for="phone">Téléphone:</label>
            <input type="tel" id="phone" required placeholder="Entrez votre numéro de téléphone"><br>
            
            <label for="photo">Photo de Profil:</label>
            <input type="file" id="photo" required><br><br>
            
            <input type="submit" value="S'inscrire" class="btn">
        </form>
        <a href="#" class="btn" onclick="goBack()">Retour</a>
    </div>

    <!-- Page de Connexion -->
    <div class="container hidden" id="login-page">
        <h1>Connexion</h1>
        <form id="login-form">
            <label for="login-email">Email:</label>
            <input type="email" id="login-email" required><br>
            <label for="login-password">Mot de passe:</label>
            <input type="password" id="login-password" required><br><br>
            <input type="submit" value="Se connecter" class="btn">
        </form>
        <a href="#" class="btn" onclick="goBack()">Retour</a>
    </div>

    <!-- Page de Profil -->
    <div class="container hidden" id="profile-page">
        <h1>Mon Profil</h1>
        <img src="default-avatar.png" id="profile-img" class="profile-img" alt="Image Profil">
        <h2 id="profile-name">Nom Prénom</h2>
        <a href="#" class="btn" onclick="showProfileSettings()">Paramètres Profil</a>
        <a href="#" class="btn" onclick="showPurchaseHistory()">Historique d'Achats</a>
        <a href="#" class="btn" onclick="showSoldProducts()">Liste de Produits Vendu</a>
        <a href="#" class="btn" onclick="goBack()">Retour</a>
    </div>

    <!-- Paramètres Profil -->
    <div class="container hidden" id="profile-settings-page">
        <h1>Paramètres de Profil</h1>
        <a href="#" class="btn" onclick="showEditProfile()">Modifier Profil</a>
        <a href="#" class="btn" onclick="deactivateAccount()">Désactiver le Compte</a>
        <a href="#" class="btn" onclick="goBack()">Retour</a>
    </div>

    <!-- Modifier Profil -->
    <div class="container hidden" id="edit-profile-page">
        <h1>Modifier Profil</h1>
        <form id="edit-profile-form">
            <label for="edit-first-name">Prénom:</label>
            <input type="text" id="edit-first-name" required><br>
            <label for="edit-last-name">Nom:</label>
            <input type="text" id="edit-last-name" required><br>
            <label for="edit-email">Email:</label>
            <input type="email" id="edit-email" required><br>
            <label for="edit-address">Adresse:</label>
            <textarea id="edit-address" required></textarea><br>
            <label for="edit-phone">Téléphone:</label>
            <input type="tel" id="edit-phone" required><br>
            <input type="submit" value="Enregistrer" class="btn">
        </form>
        <a href="#" class="btn" onclick="goBack()">Retour</a>
    </div>

    <!-- Historique d'Achats -->
    <div class="container hidden" id="purchase-history-page">
        <h1>Historique d'Achats</h1>
        <p>Aucun achat pour l'instant.</p>
        <a href="#" class="btn" onclick="goBack()">Retour</a>
    </div>

    <!-- Liste des Produits Vendu -->
    <div class="container hidden" id="sold-products-page">
        <h1>Liste des Produits Vendu</h1>
        <p>Aucun produit vendu pour l'instant.</p>
        <a href="#" class="btn" onclick="goBack()">Retour</a>
    </div>

    <script>
        var previousPage = '';

        // Fonction pour sauvegarder l'utilisateur dans le localStorage
        function saveUserToLocalStorage(user) {
            localStorage.setItem('user', JSON.stringify(user));
        }

        // Fonction pour charger l'utilisateur depuis le localStorage
        function loadUserFromLocalStorage() {
            return JSON.parse(localStorage.getItem('user'));
        }

        // Fonction pour afficher la page de profil après inscription/connexion
        function showProfile(firstName, lastName, photo) {
            // Masque toutes les pages
            hideAllPages();
            
            // Affiche la page de profil
            var profilePage = document.getElementById('profile-page');
            profilePage.classList.remove('hidden');

            // Affiche les informations du profil
            document.getElementById('profile-name').textContent = firstName + " " + lastName;
            
            // Si une photo a été ajoutée, l'afficher
            if (photo) {
                var reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('profile-img').src = e.target.result;
                };
                reader.readAsDataURL(photo); // Convertit l'image en URL pour l'afficher dans l'élément img
            }
        }

        // Fonction pour cacher toutes les pages
        function hideAllPages() {
            var pages = document.querySelectorAll('.container');
            pages.forEach(function(page) {
                page.classList.add('hidden');
            });
        }

        // Fonction pour revenir à la page précédente
        function goBack() {
            hideAllPages();
            if (previousPage) {
                document.getElementById(previousPage).classList.remove('hidden');
            } else {
                document.getElementById('home-page').classList.remove('hidden');
            }
        }

        // Fonction pour afficher l'inscription
        function showSignUp() {
            previousPage = 'home-page';
            hideAllPages();
            document.getElementById('signup-page').classList.remove('hidden');
        }

        // Fonction pour afficher la connexion
        function showLogin() {
            previousPage = 'home-page';
            hideAllPages();
            document.getElementById('login-page').classList.remove('hidden');
        }

        // Fonction pour afficher les paramètres du profil
        function showProfileSettings() {
            previousPage = 'profile-page';
            hideAllPages();
            document.getElementById('profile-settings-page').classList.remove('hidden');
        }

        // Fonction pour afficher l'édition du profil avec les données existantes
        function showEditProfile() {
            var user = loadUserFromLocalStorage();
            previousPage = 'profile-settings-page';
            hideAllPages();
            document.getElementById('edit-profile-page').classList.remove('hidden');
            
            // Pré-remplir les champs avec les données actuelles
            document.getElementById('edit-first-name').value = user.firstName;
            document.getElementById('edit-last-name').value = user.lastName;
            document.getElementById('edit-email').value = user.email;
            document.getElementById('edit-address').value = user.address;
            document.getElementById('edit-phone').value = user.phone;
        }

        // Fonction pour gérer l'inscription
        document.getElementById("signup-form").addEventListener("submit", function(event) {
            event.preventDefault();

            var user = {
                id: document.getElementById('id').value,
                firstName: document.getElementById('first-name').value,
                lastName: document.getElementById('last-name').value,
                email: document.getElementById('email').value,
                password: document.getElementById('password').value,
                address: document.getElementById('address').value,
                phone: document.getElementById('phone').value,
                photo: document.getElementById('photo').files[0]
            };

            // Sauvegarder l'utilisateur dans le localStorage
            saveUserToLocalStorage(user);

            // Afficher le profil après inscription
            showProfile(user.firstName, user.lastName, user.photo);
        });

        // Fonction pour gérer la connexion
        document.getElementById("login-form").addEventListener("submit", function(event) {
            event.preventDefault();

            var email = document.getElementById('login-email').value;
            var password = document.getElementById('login-password').value;

            // Vérifier les informations de connexion avec localStorage
            var user = loadUserFromLocalStorage();
            if (user && user.email === email && user.password === password) {
                // Afficher le profil si les informations sont correctes
                showProfile(user.firstName, user.lastName, user.photo);
            } else {
                alert('Email ou mot de passe incorrect');
            }
        });

        // Fonction pour désactiver le compte
        function deactivateAccount() {
            // Demander à l'utilisateur de confirmer la désactivation du compte
            var confirmation = confirm("Êtes-vous sûr de vouloir désactiver votre compte ? Cette action est irréversible.");

            if (confirmation) {
                // Supprimer les informations de l'utilisateur du localStorage
                localStorage.removeItem('user');

                // Afficher un message de confirmation
                alert("Votre compte a été supprimé définitivement.");

                // Cacher toutes les pages et afficher la page d'accueil
                hideAllPages();
                document.getElementById('home-page').classList.remove('hidden');
            }
        }
    </script>
</body>
</html>
